<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HugLoop | Play with Connection & Care</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Fredoka for a playful look, Inter for body -->
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        h1, h2, h3, h4, h5, h6, .brand-font {
            font-family: 'Fredoka', sans-serif;
        }
        .blob-shape {
            border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%;
        }
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1; 
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; 
        }
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#FF8FAB',     /* Soft Pink/Red for "Hug" */
                        secondary: '#48CAE4',   /* Calming Blue */
                        accent: '#FDE12D',      /* Sunny Yellow */
                        dark: '#2D3436',       /* Soft Black */
                        light: '#FFF5F8',       /* Very light pink tint */
                        green: '#95D5B2'        /* Eco Green */
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 text-dark flex flex-col min-h-screen">

    <!-- Navigation -->
    <nav class="bg-white shadow-sm sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-20 items-center">
                <!-- Logo -->
                <div class="flex items-center cursor-pointer" onclick="router.navigate('home')">
                    <div class="w-10 h-10 bg-primary rounded-full flex items-center justify-center text-white mr-2 shadow-lg group-hover:rotate-180 transition duration-500">
                        <i data-lucide="infinity" class="w-6 h-6"></i>
                    </div>
                    <div>
                        <span class="brand-font text-2xl font-bold text-dark tracking-tight">HugLoop</span>
                        <span class="hidden sm:block text-xs text-gray-400 font-medium tracking-wider">CONSCIOUS PLAY</span>
                    </div>
                </div>

                <!-- Desktop Menu -->
                <div class="hidden md:flex space-x-8 items-center">
                    <button onclick="router.navigate('home')" class="text-gray-600 hover:text-primary font-medium transition">Home</button>
                    <button onclick="router.navigate('shop')" class="text-gray-600 hover:text-primary font-medium transition">Shop Collection</button>
                    <button onclick="router.navigate('about')" class="text-gray-600 hover:text-primary font-medium transition">Our Purpose</button>
                </div>

                <!-- Cart & Mobile Menu Button -->
                <div class="flex items-center space-x-4">
                    <button onclick="cart.toggle()" class="relative p-2 text-gray-600 hover:text-primary transition bg-gray-100 rounded-full hover:bg-pink-50">
                        <i data-lucide="shopping-cart" class="w-6 h-6"></i>
                        <span id="cart-count" class="absolute -top-1 -right-1 bg-primary text-white text-xs font-bold w-5 h-5 rounded-full flex items-center justify-center transform scale-0 transition-transform duration-200">0</span>
                    </button>
                    <button class="md:hidden p-2 text-gray-600" onclick="mobileMenu.toggle()">
                        <i data-lucide="menu" class="w-6 h-6"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Mobile Menu (Hidden by default) -->
        <div id="mobile-menu" class="hidden md:hidden bg-white border-t border-gray-100 p-4 shadow-lg absolute w-full z-40">
            <div class="flex flex-col space-y-4">
                <button onclick="router.navigate('home'); mobileMenu.toggle()" class="text-left font-medium text-gray-700">Home</button>
                <button onclick="router.navigate('shop'); mobileMenu.toggle()" class="text-left font-medium text-gray-700">Shop Collection</button>
                <button onclick="router.navigate('about'); mobileMenu.toggle()" class="text-left font-medium text-gray-700">Our Purpose</button>
            </div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main id="app" class="flex-grow">
        <!-- Content injected via JS -->
    </main>

    <!-- Shopping Cart Sidebar (Overlay) -->
    <div id="cart-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden transition-opacity duration-300 opacity-0" onclick="cart.toggle()"></div>
    <div id="cart-sidebar" class="fixed inset-y-0 right-0 max-w-sm w-full bg-white shadow-2xl z-50 transform translate-x-full transition-transform duration-300 flex flex-col">
        <div class="p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50">
            <h2 class="text-xl font-bold brand-font text-gray-800">Your Loop</h2>
            <button onclick="cart.toggle()" class="text-gray-400 hover:text-red-500">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>
        </div>
        <div id="cart-items" class="flex-1 overflow-y-auto p-6 space-y-4">
            <!-- Cart Items Injected Here -->
        </div>
        <div class="p-6 border-t border-gray-100 bg-gray-50">
            <div class="flex justify-between items-center mb-4">
                <span class="text-gray-600 font-medium">Subtotal</span>
                <span id="cart-total" class="text-2xl font-bold text-dark">$0.00</span>
            </div>
            <button onclick="alert('Checkout functionality coming soon!')" class="w-full bg-primary hover:bg-red-400 text-white font-bold py-3 px-4 rounded-xl shadow-lg transform transition active:scale-95 flex justify-center items-center gap-2">
                Secure Checkout <i data-lucide="arrow-right" class="w-4 h-4"></i>
            </button>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-dark text-white pt-16 pb-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-12">
                <div class="col-span-1 md:col-span-1">
                    <div class="flex items-center mb-4">
                        <div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center text-white mr-2">
                            <i data-lucide="infinity" class="w-5 h-5"></i>
                        </div>
                        <span class="brand-font text-xl font-bold">HugLoop</span>
                    </div>
                    <p class="text-gray-400 text-sm leading-relaxed">
                        Toys that hug back. We are dedicated to closing the loop between playtime, emotional growth, and a sustainable future.
                    </p>
                </div>
                <div>
                    <h3 class="font-bold text-lg mb-4 brand-font text-secondary">Shop</h3>
                    <ul class="space-y-2 text-sm text-gray-400">
                        <li><a href="#" onclick="router.navigate('shop')" class="hover:text-white transition">All Treasures</a></li>
                        <li><a href="#" class="hover:text-white transition">New Arrivals</a></li>
                        <li><a href="#" class="hover:text-white transition">Sustainable Picks</a></li>
                        <li><a href="#" class="hover:text-white transition">Gift Cards</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-bold text-lg mb-4 brand-font text-accent">Support</h3>
                    <ul class="space-y-2 text-sm text-gray-400">
                        <li><a href="#" class="hover:text-white transition">Shipping & Returns</a></li>
                        <li><a href="#" class="hover:text-white transition">Care Guide</a></li>
                        <li><a href="#" class="hover:text-white transition">Contact Us</a></li>
                        <li><a href="#" class="hover:text-white transition">Privacy Policy</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-bold text-lg mb-4 brand-font text-primary">Join the Loop</h3>
                    <p class="text-gray-400 text-sm mb-4">Tips on conscious parenting and play sent to your inbox.</p>
                    <div class="flex">
                        <input type="email" placeholder="Email address" class="bg-gray-800 text-white px-4 py-2 rounded-l-lg focus:outline-none focus:ring-1 focus:ring-primary w-full text-sm">
                        <button class="bg-primary px-4 py-2 rounded-r-lg hover:bg-red-400 transition">
                            <i data-lucide="heart" class="w-4 h-4"></i>
                        </button>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-800 mt-12 pt-8 text-center text-gray-500 text-sm">
                &copy; 2024 HugLoop Inc. Crafted with love.
            </div>
        </div>
    </footer>

    <!-- Templates (Hidden) -->
    <template id="tpl-home">
        <!-- Hero Section -->
        <section class="bg-light relative overflow-hidden">
            <div class="absolute top-0 right-0 -mr-20 -mt-20 w-96 h-96 bg-secondary opacity-10 rounded-full blur-3xl"></div>
            <div class="absolute bottom-0 left-0 -ml-20 -mb-20 w-72 h-72 bg-primary opacity-10 rounded-full blur-3xl"></div>
            
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 md:py-32 flex flex-col md:flex-row items-center">
                <div class="md:w-1/2 md:pr-12 text-center md:text-left z-10 fade-in">
                    <span class="inline-block px-4 py-1.5 rounded-full bg-white border border-gray-200 text-primary font-bold text-sm tracking-wide mb-6 shadow-sm">
                        <i data-lucide="leaf" class="w-3 h-3 inline mr-1"></i> ECO-FRIENDLY & KIND
                    </span>
                    <h1 class="text-5xl md:text-6xl font-extrabold text-dark leading-tight mb-6">
                        Play that<br>
                        <span class="text-transparent bg-clip-text bg-gradient-to-r from-primary to-orange-400">Hugs Back.</span>
                    </h1>
                    <p class="text-xl text-gray-600 mb-8 leading-relaxed">
                        Discover a curated circle of toys designed to spark emotional intelligence, foster connection, and protect our planet.
                    </p>
                    <div class="flex flex-col sm:flex-row justify-center md:justify-start gap-4">
                        <button onclick="router.navigate('shop')" class="bg-dark text-white font-bold py-4 px-8 rounded-xl shadow-lg hover:bg-gray-800 transform hover:-translate-y-1 transition duration-200">
                            Start the Loop
                        </button>
                        <button onclick="router.navigate('about')" class="bg-white text-dark border-2 border-gray-200 font-bold py-4 px-8 rounded-xl hover:border-dark hover:bg-gray-50 transition duration-200">
                            Our Mission
                        </button>
                    </div>
                </div>
                <div class="md:w-1/2 mt-12 md:mt-0 relative z-10 fade-in">
                    <div class="relative">
                         <!-- Abstract shape background -->
                        <div class="absolute inset-0 bg-accent rounded-full opacity-20 blur-2xl transform scale-90"></div>
                        <img src="https://images.unsplash.com/photo-1596461404969-9ae70f2830c1?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Happy kid playing" class="relative rounded-[3rem] shadow-2xl border-4 border-white transform -rotate-1 hover:rotate-0 transition duration-500 object-cover h-[400px] w-full">
                        <!-- Floating badges -->
                        <div class="absolute -bottom-6 -left-6 bg-white p-4 rounded-2xl shadow-xl animate-bounce" style="animation-duration: 4s;">
                            <div class="flex items-center gap-3">
                                <div class="bg-green-100 p-2 rounded-lg text-green-600">
                                    <i data-lucide="recycle" class="w-6 h-6"></i>
                                </div>
                                <div>
                                    <div class="text-xs text-gray-500 font-bold">100%</div>
                                    <div class="font-bold text-dark">Sustainable</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Categories Section -->
        <section class="py-20 bg-white">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-16">
                    <h2 class="text-3xl md:text-4xl font-bold mb-4">Shop by Connection</h2>
                    <p class="text-gray-500 max-w-2xl mx-auto">We don't just sell toys; we provide tools for emotional growth and family bonding.</p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <!-- Category 1 -->
                    <div class="group cursor-pointer" onclick="router.navigate('shop')">
                        <div class="bg-pink-50 rounded-3xl p-8 transition duration-300 hover:shadow-xl hover:-translate-y-2 h-full border border-pink-100">
                            <div class="w-16 h-16 bg-primary rounded-2xl flex items-center justify-center text-white mb-6 shadow-lg shadow-pink-200">
                                <i data-lucide="heart-handshake" class="w-8 h-8"></i>
                            </div>
                            <h3 class="text-2xl font-bold mb-3 group-hover:text-primary transition">Emotional EQ</h3>
                            <p class="text-gray-600 mb-6">Plush companions and games that help children name feelings and build empathy.</p>
                            <span class="text-primary font-bold flex items-center text-sm">Explore EQ <i data-lucide="arrow-right" class="w-4 h-4 ml-1"></i></span>
                        </div>
                    </div>

                    <!-- Category 2 -->
                    <div class="group cursor-pointer" onclick="router.navigate('shop')">
                        <div class="bg-green-50 rounded-3xl p-8 transition duration-300 hover:shadow-xl hover:-translate-y-2 h-full border border-green-100">
                            <div class="w-16 h-16 bg-green-500 rounded-2xl flex items-center justify-center text-white mb-6 shadow-lg shadow-green-200">
                                <i data-lucide="sprout" class="w-8 h-8"></i>
                            </div>
                            <h3 class="text-2xl font-bold mb-3 group-hover:text-green-600 transition">Sustainable Build</h3>
                            <p class="text-gray-600 mb-6">Open-ended blocks and kits made from recycled ocean plastic and FSC wood.</p>
                            <span class="text-green-600 font-bold flex items-center text-sm">Explore Eco <i data-lucide="arrow-right" class="w-4 h-4 ml-1"></i></span>
                        </div>
                    </div>

                    <!-- Category 3 -->
                    <div class="group cursor-pointer" onclick="router.navigate('shop')">
                        <div class="bg-blue-50 rounded-3xl p-8 transition duration-300 hover:shadow-xl hover:-translate-y-2 h-full border border-blue-100">
                            <div class="w-16 h-16 bg-secondary rounded-2xl flex items-center justify-center text-white mb-6 shadow-lg shadow-blue-200">
                                <i data-lucide="users" class="w-8 h-8"></i>
                            </div>
                            <h3 class="text-2xl font-bold mb-3 group-hover:text-secondary transition">Family Bond</h3>
                            <p class="text-gray-600 mb-6">Collaborative board games and puzzles designed to be played together, not alone.</p>
                            <span class="text-secondary font-bold flex items-center text-sm">Explore Together <i data-lucide="arrow-right" class="w-4 h-4 ml-1"></i></span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Featured Products Preview -->
        <section class="py-20 bg-gray-50">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-end mb-12">
                    <div>
                        <h2 class="text-3xl font-bold mb-2">Loved by the Loop</h2>
                        <p class="text-gray-500">Trending items that parents and kids are hugging right now.</p>
                    </div>
                    <button onclick="router.navigate('shop')" class="hidden md:flex items-center text-primary font-bold hover:text-red-700 transition">
                        View All Treasures <i data-lucide="arrow-right" class="w-5 h-5 ml-2"></i>
                    </button>
                </div>
                <!-- Grid Container injected by JS -->
                <div id="home-products-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8"></div>
                
                <div class="mt-12 text-center md:hidden">
                     <button onclick="router.navigate('shop')" class="btn-primary w-full py-4 rounded-xl bg-white border border-gray-200 shadow-sm text-dark font-bold">
                        View All Treasures
                    </button>
                </div>
            </div>
        </section>
        
        <!-- Trust Indicators -->
        <section class="py-16 bg-dark text-white">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
                    <div class="p-4">
                        <i data-lucide="leaf" class="w-10 h-10 mx-auto mb-4 text-green-400"></i>
                        <h4 class="font-bold text-lg mb-2">Planet Friendly</h4>
                        <p class="text-gray-400 text-sm">Materials sourced with respect for the earth and future generations.</p>
                    </div>
                    <div class="p-4">
                        <i data-lucide="heart" class="w-10 h-10 mx-auto mb-4 text-primary"></i>
                        <h4 class="font-bold text-lg mb-2">Heart Centered</h4>
                        <p class="text-gray-400 text-sm">Curated to support emotional regulation and social skills.</p>
                    </div>
                    <div class="p-4">
                        <i data-lucide="package-check" class="w-10 h-10 mx-auto mb-4 text-secondary"></i>
                        <h4 class="font-bold text-lg mb-2">Carbon Neutral Shipping</h4>
                        <p class="text-gray-400 text-sm">We offset 100% of carbon emissions from our warehouse to your door.</p>
                    </div>
                </div>
            </div>
        </section>
    </template>

    <template id="tpl-shop">
        <div class="bg-gray-50 min-h-screen py-12 fade-in">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex flex-col md:flex-row justify-between items-center mb-8">
                    <div>
                        <h1 class="text-4xl font-bold text-dark mb-2">Shop The Loop</h1>
                        <p class="text-gray-500">Showing <span id="product-count">0</span> conscious play items.</p>
                    </div>
                    
                    <div class="mt-4 md:mt-0 flex gap-4">
                        <select id="sort-select" class="bg-white border border-gray-200 text-gray-700 py-2 px-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent cursor-pointer">
                            <option value="featured">Featured</option>
                            <option value="price-low">Price: Low to High</option>
                            <option value="price-high">Price: High to Low</option>
                        </select>
                    </div>
                </div>

                <div class="flex flex-col md:flex-row gap-8">
                    <!-- Sidebar Filters -->
                    <div class="w-full md:w-64 flex-shrink-0">
                        <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 sticky top-24">
                            <div class="mb-6">
                                <h3 class="font-bold text-lg mb-4 flex items-center gap-2"><i data-lucide="filter" class="w-4 h-4"></i> Collections</h3>
                                <div class="space-y-2" id="category-filters">
                                    <label class="flex items-center space-x-3 cursor-pointer">
                                        <input type="radio" name="category" value="all" checked class="form-radio text-primary h-4 w-4">
                                        <span class="text-gray-700">All Treasures</span>
                                    </label>
                                    <label class="flex items-center space-x-3 cursor-pointer">
                                        <input type="radio" name="category" value="Emotional EQ" class="form-radio text-primary h-4 w-4">
                                        <span class="text-gray-700">Emotional EQ</span>
                                    </label>
                                    <label class="flex items-center space-x-3 cursor-pointer">
                                        <input type="radio" name="category" value="Sustainable Build" class="form-radio text-primary h-4 w-4">
                                        <span class="text-gray-700">Sustainable Build</span>
                                    </label>
                                    <label class="flex items-center space-x-3 cursor-pointer">
                                        <input type="radio" name="category" value="Family Bond" class="form-radio text-primary h-4 w-4">
                                        <span class="text-gray-700">Family Bond</span>
                                    </label>
                                </div>
                            </div>
                            
                            <div class="p-4 bg-blue-50 rounded-xl border border-blue-100">
                                <h4 class="font-bold text-blue-800 text-sm mb-1">Need guidance?</h4>
                                <p class="text-xs text-blue-700 mb-2">Our child development specialists are here to chat.</p>
                                <button class="text-xs font-bold text-blue-800 underline">Message us</button>
                            </div>
                        </div>
                    </div>

                    <!-- Product Grid -->
                    <div class="flex-1">
                        <div id="shop-products-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                            <!-- Products injected here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <template id="tpl-about">
        <div class="fade-in">
            <!-- Mission Hero -->
            <section class="bg-primary text-white py-20 relative overflow-hidden">
                <div class="absolute inset-0 bg-black opacity-10"></div>
                <div class="max-w-4xl mx-auto px-4 text-center relative z-10">
                    <span class="text-white font-bold tracking-wider text-sm uppercase mb-4 block opacity-80">About HugLoop</span>
                    <h1 class="text-4xl md:text-5xl font-bold mb-8">We believe the future is circular and soft.</h1>
                    <p class="text-xl text-white opacity-90 leading-relaxed">
                        At HugLoop, we are rethinking the toy box. We curate experiences that connect children to their emotions, their families, and the planet they will inherit.
                    </p>
                </div>
            </section>

            <!-- The Story -->
            <section class="py-20 bg-white">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="flex flex-col md:flex-row items-center gap-16">
                        <div class="md:w-1/2">
                             <img src="https://images.unsplash.com/photo-1596461404969-9ae70f2830c1?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Child hugging a toy" class="rounded-3xl shadow-2xl rotate-2 hover:rotate-0 transition duration-500">
                        </div>
                        <div class="md:w-1/2">
                            <h2 class="text-3xl font-bold mb-6 text-dark">Our Story</h2>
                            <div class="space-y-4 text-gray-600 leading-relaxed">
                                <p>
                                    HugLoop started when we noticed a disconnect. Modern toys were getting "smarter" with screens and chips, but children were feeling more isolated and anxious.
                                </p>
                                <p>
                                    We asked ourselves: <strong>What if a toy could hug you back?</strong> Not literally, but emotionally. What if play was about closing the loop between a child's inner world and the outer world?
                                </p>
                                <p>
                                    Today, we offer a carefully vetted selection of "Slow Toys." Toys made from renewable resources that encourage patience, empathy, and collaboration. We call it the "HugLoop" â€” a continuous cycle of care for the child and the earth.
                                </p>
                            </div>
                            
                            <div class="mt-8 grid grid-cols-2 gap-4">
                                <div class="bg-gray-50 p-4 rounded-xl border border-gray-100">
                                    <h4 class="font-bold text-primary text-2xl mb-1">10k+</h4>
                                    <p class="text-sm text-gray-500">Trees Planted</p>
                                </div>
                                <div class="bg-gray-50 p-4 rounded-xl border border-gray-100">
                                    <h4 class="font-bold text-secondary text-2xl mb-1">Zero</h4>
                                    <p class="text-sm text-gray-500">Plastic Packaging</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Values -->
            <section class="py-20 bg-light">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="text-center mb-16">
                        <h2 class="text-3xl font-bold mb-4">The HugLoop Promise</h2>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <div class="bg-white p-8 rounded-2xl shadow-sm border-b-4 border-primary">
                            <h3 class="text-xl font-bold mb-3">Empathy First</h3>
                            <p class="text-gray-600">We prioritize toys that help children identify and regulate emotions, fostering a generation of kind leaders.</p>
                        </div>
                        <div class="bg-white p-8 rounded-2xl shadow-sm border-b-4 border-green-400">
                            <h3 class="text-xl font-bold mb-3">Earth Tended</h3>
                            <p class="text-gray-600">From recycled milk jugs to FSC-certified maple, our materials are chosen to protect the planet.</p>
                        </div>
                        <div class="bg-white p-8 rounded-2xl shadow-sm border-b-4 border-accent">
                            <h3 class="text-xl font-bold mb-3">Play Together</h3>
                            <p class="text-gray-600">We champion cooperative games where everyone wins, building social bonds over competition.</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </template>

    <script>
        // --- Data (Updated for HugLoop) ---
        const products = [
            {
                id: 1,
                name: "The 'Big Feelings' Plushie Set",
                price: 45.00,
                category: "Emotional EQ",
                age: "2-6",
                image: "https://images.unsplash.com/photo-1587654780291-39c9404d746b?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                description: "A set of 3 soft monsters with different facial expressions to help discuss emotions."
            },
            {
                id: 2,
                name: "Infinity Wooden Railway",
                price: 89.99,
                category: "Sustainable Build",
                age: "3+",
                image: "https://images.unsplash.com/photo-1587654780291-39c9404d746b?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                description: "FSC-certified beech wood tracks that form a perfect, continuous loop."
            },
            {
                id: 3,
                name: "Cooperative Orchard Game",
                price: 34.95,
                category: "Family Bond",
                age: "3-6",
                image: "https://images.unsplash.com/photo-1587654780291-39c9404d746b?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                description: "Players work together to harvest fruit before the raven comes. Everyone wins or loses together."
            },
            {
                id: 4,
                name: "Recycled Ocean Blocks",
                price: 59.99,
                category: "Sustainable Build",
                age: "2+",
                image: "https://images.unsplash.com/photo-1587654780291-39c9404d746b?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                description: "Colorful geometric blocks made entirely from recycled fishing nets."
            },
            {
                id: 5,
                name: "Mindfulness Chime",
                price: 22.00,
                category: "Emotional EQ",
                age: "3+",
                image: "https://images.unsplash.com/photo-1587654780291-39c9404d746b?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                description: "A gentle tone bar to signal quiet time or transitions, helping center focus."
            },
            {
                id: 6,
                name: "Family Yoga Cards",
                price: 18.99,
                category: "Family Bond",
                age: "3+",
                image: "https://images.unsplash.com/photo-1587654780291-39c9404d746b?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                description: "Illustrated poses designed for parent and child to do together."
            },
            {
                id: 7,
                name: "Calming Sensory Stones",
                price: 29.99,
                category: "Emotional EQ",
                age: "3-5",
                image: "https://images.unsplash.com/photo-1596461404969-9ae70f2830c1?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                description: "Smooth, weighted river stones etched with simple faces for soothing tactile play."
            },
            {
                id: 8,
                name: "Cardboard Castle Kit",
                price: 42.50,
                category: "Sustainable Build",
                age: "4-8",
                image: "https://images.unsplash.com/photo-1596461404969-9ae70f2830c1?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                description: "Modular panels made from 100% recycled cardboard. Paint it, build it, recycle it."
            }
        ];

        // --- Routing ---
        const router = {
            init: function() {
                window.addEventListener('popstate', () => this.handleRoute());
                this.handleRoute(); // Initial load
            },
            navigate: function(route) {
                history.pushState({}, '', '#' + route);
                this.handleRoute();
                window.scrollTo(0, 0);
            },
            handleRoute: function() {
                const hash = window.location.hash.slice(1) || 'home';
                const app = document.getElementById('app');
                
                // Reset Active Nav State
                document.querySelectorAll('nav button').forEach(btn => btn.classList.remove('text-primary'));
                
                // Clear existing content
                app.innerHTML = '';

                if (hash === 'home') {
                    const tpl = document.getElementById('tpl-home');
                    app.appendChild(tpl.content.cloneNode(true));
                    this.renderHomeProducts();
                    lucide.createIcons();
                } else if (hash === 'shop') {
                    const tpl = document.getElementById('tpl-shop');
                    app.appendChild(tpl.content.cloneNode(true));
                    this.setupShop();
                    lucide.createIcons();
                } else if (hash === 'about') {
                    const tpl = document.getElementById('tpl-about');
                    app.appendChild(tpl.content.cloneNode(true));
                    lucide.createIcons();
                }
            },
            renderHomeProducts: function() {
                const grid = document.getElementById('home-products-grid');
                if(!grid) return;
                
                // Take first 4 products
                products.slice(0, 4).forEach(product => {
                    grid.innerHTML += this.createProductCard(product);
                });
            },
            setupShop: function() {
                const grid = document.getElementById('shop-products-grid');
                const filters = document.getElementById('category-filters');
                const countSpan = document.getElementById('product-count');
                
                const render = (category = 'all') => {
                    grid.innerHTML = '';
                    const filtered = category === 'all' 
                        ? products 
                        : products.filter(p => p.category === category);
                    
                    countSpan.innerText = filtered.length;
                    
                    if(filtered.length === 0) {
                        grid.innerHTML = `<div class="col-span-3 text-center py-10 text-gray-400">No products found in this category.</div>`;
                    } else {
                        filtered.forEach(p => {
                            grid.innerHTML += this.createProductCard(p);
                        });
                    }
                    lucide.createIcons();
                };

                // Initial Render
                render();

                // Event Listeners for Filters
                filters.addEventListener('change', (e) => {
                    if (e.target.name === 'category') {
                        render(e.target.value);
                    }
                });
            },
            createProductCard: function(product) {
                // Defines badges based on category for visual flair
                let badgeColor = "bg-gray-100 text-gray-600";
                if(product.category === 'Emotional EQ') badgeColor = "bg-pink-100 text-pink-600";
                if(product.category === 'Sustainable Build') badgeColor = "bg-green-100 text-green-600";
                if(product.category === 'Family Bond') badgeColor = "bg-blue-100 text-blue-600";

                return `
                <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-lg transition duration-300 group flex flex-col h-full">
                    <div class="relative overflow-hidden h-48 bg-gray-50">
                        <img src="${product.image}" alt="${product.name}" class="w-full h-full object-cover transform group-hover:scale-105 transition duration-500">
                        <div class="absolute top-2 left-2 bg-white/90 backdrop-blur-sm px-2 py-1 rounded-lg text-xs font-bold text-gray-600">
                            Ages ${product.age}
                        </div>
                    </div>
                    <div class="p-5 flex-1 flex flex-col">
                        <div class="inline-flex self-start px-2 py-0.5 rounded-md text-[10px] font-bold uppercase tracking-wide mb-2 ${badgeColor}">
                            ${product.category}
                        </div>
                        <h3 class="font-bold text-lg text-dark mb-2 leading-tight">${product.name}</h3>
                        <p class="text-gray-500 text-sm mb-4 line-clamp-2 flex-1">${product.description}</p>
                        <div class="flex items-center justify-between mt-auto">
                            <span class="text-xl font-bold text-dark">$${product.price.toFixed(2)}</span>
                            <button onclick="cart.add(${product.id})" class="bg-gray-100 hover:bg-primary hover:text-white text-gray-700 p-2.5 rounded-xl transition duration-200">
                                <i data-lucide="plus" class="w-5 h-5"></i>
                            </button>
                        </div>
                    </div>
                </div>
                `;
            }
        };

        // --- Cart Logic ---
        const cart = {
            items: [],
            add: function(productId) {
                const product = products.find(p => p.id === productId);
                const existing = this.items.find(i => i.id === productId);
                
                if (existing) {
                    existing.quantity++;
                } else {
                    this.items.push({ ...product, quantity: 1 });
                }
                
                this.updateUI();
                this.showToast(`Added ${product.name} to your loop!`);
            },
            remove: function(productId) {
                this.items = this.items.filter(i => i.id !== productId);
                this.updateUI();
            },
            toggle: function() {
                const overlay = document.getElementById('cart-overlay');
                const sidebar = document.getElementById('cart-sidebar');
                
                if (sidebar.classList.contains('translate-x-full')) {
                    // Open
                    overlay.classList.remove('hidden');
                    // Small timeout to allow display:block to apply before opacity transition
                    setTimeout(() => {
                        overlay.classList.remove('opacity-0');
                        sidebar.classList.remove('translate-x-full');
                    }, 10);
                } else {
                    // Close
                    overlay.classList.add('opacity-0');
                    sidebar.classList.add('translate-x-full');
                    setTimeout(() => {
                        overlay.classList.add('hidden');
                    }, 300);
                }
            },
            updateUI: function() {
                // Update Badge
                const count = this.items.reduce((acc, item) => acc + item.quantity, 0);
                const badge = document.getElementById('cart-count');
                badge.innerText = count;
                badge.classList.remove('scale-0');
                if (count === 0) badge.classList.add('scale-0');

                // Update List
                const container = document.getElementById('cart-items');
                const totalEl = document.getElementById('cart-total');
                
                if (this.items.length === 0) {
                    container.innerHTML = `
                        <div class="text-center text-gray-400 mt-10">
                            <i data-lucide="infinity" class="w-12 h-12 mx-auto mb-3 opacity-50"></i>
                            <p>Your loop is empty.</p>
                            <button onclick="cart.toggle(); router.navigate('shop')" class="mt-4 text-primary font-medium hover:underline">Browse Treasures</button>
                        </div>
                    `;
                } else {
                    container.innerHTML = this.items.map(item => `
                        <div class="flex gap-4 mb-4">
                            <div class="w-16 h-16 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0">
                                <img src="${item.image}" class="w-full h-full object-cover">
                            </div>
                            <div class="flex-1">
                                <h4 class="font-bold text-sm text-dark line-clamp-1">${item.name}</h4>
                                <div class="text-sm text-gray-500">$${item.price} x ${item.quantity}</div>
                            </div>
                            <button onclick="cart.remove(${item.id})" class="text-gray-400 hover:text-red-500 h-fit">
                                <i data-lucide="trash-2" class="w-4 h-4"></i>
                            </button>
                        </div>
                    `).join('');
                }

                // Update Total
                const total = this.items.reduce((acc, item) => acc + (item.price * item.quantity), 0);
                totalEl.innerText = '$' + total.toFixed(2);
                
                lucide.createIcons();
            },
            showToast: function(message) {
                // Simple toast notification
                const toast = document.createElement('div');
                toast.className = 'fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-dark text-white px-6 py-3 rounded-full shadow-2xl z-50 flex items-center gap-2 text-sm font-medium fade-in';
                toast.innerHTML = `<i data-lucide="heart" class="w-4 h-4 text-primary"></i> ${message}`;
                document.body.appendChild(toast);
                lucide.createIcons();
                setTimeout(() => {
                    toast.style.opacity = '0';
                    toast.style.transition = 'opacity 0.5s';
                    setTimeout(() => toast.remove(), 500);
                }, 2000);
            }
        };

        const mobileMenu = {
            toggle: function() {
                const menu = document.getElementById('mobile-menu');
                menu.classList.toggle('hidden');
            }
        }

        // Initialize
        window.addEventListener('DOMContentLoaded', () => {
            router.init();
        });

    </script>
</body>
</html>